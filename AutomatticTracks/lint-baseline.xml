<?xml version="1.0" encoding="UTF-8"?>
<issues format="5" by="lint 4.0.2" client="gradle" variant="release" version="4.0.2">

    <issue
        id="MissingPermission"
        message="Missing permissions required by ConnectivityManager.getNetworkInfo: android.permission.ACCESS_NETWORK_STATE"
        errorLine1="                    NetworkInfo wifiInfo = connManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI);"
        errorLine2="                                           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~">
        <location
            file="src/main/java/com/automattic/android/tracks/DeviceInformation.java"
            line="349"
            column="44"/>
    </issue>

    <issue
        id="MissingPermission"
        message="Missing permissions required by BluetoothAdapter.isEnabled: android.permission.BLUETOOTH"
        errorLine1="                isBluetoothEnabled = bluetoothAdapter.isEnabled();"
        errorLine2="                                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~">
        <location
            file="src/main/java/com/automattic/android/tracks/DeviceInformation.java"
            line="384"
            column="38"/>
    </issue>

    <issue
        id="MissingPermission"
        message="Missing permissions required by ConnectivityManager.getActiveNetworkInfo: android.permission.ACCESS_NETWORK_STATE"
        errorLine1="        return cm.getActiveNetworkInfo();"
        errorLine2="               ~~~~~~~~~~~~~~~~~~~~~~~~~">
        <location
            file="src/main/java/com/automattic/android/tracks/NetworkUtils.java"
            line="31"
            column="16"/>
    </issue>

    <issue
        id="DefaultLocale"
        message="Implicitly using the default locale is a common source of bugs: Use `toLowerCase(Locale)` instead. For strings meant to be internal use `Locale.ROOT`, otherwise `Locale.getDefault()`."
        errorLine1="        if (!key.toLowerCase().equals(key)) {"
        errorLine2="                 ~~~~~~~~~~~">
        <location
            file="src/main/java/com/automattic/android/tracks/Event.java"
            line="143"
            column="18"/>
    </issue>

    <issue
        id="DefaultLocale"
        message="Implicitly using the default locale is a common source of bugs: Use `toLowerCase(Locale)` instead. For strings meant to be internal use `Locale.ROOT`, otherwise `Locale.getDefault()`."
        errorLine1="        String keyToTestLowercase = keyToTest.toLowerCase();"
        errorLine2="                                              ~~~~~~~~~~~">
        <location
            file="src/main/java/com/automattic/android/tracks/MessageBuilder.java"
            line="32"
            column="47"/>
    </issue>

    <issue
        id="DefaultLocale"
        message="Implicitly using the default locale is a common source of bugs: Use `toLowerCase(Locale)` instead. For strings meant to be internal use `Locale.ROOT`, otherwise `Locale.getDefault()`."
        errorLine1="                String anonID = eventJSON.getString(ALIAS_USER_ANONID_PROP_NAME.toLowerCase());"
        errorLine2="                                                                                ~~~~~~~~~~~">
        <location
            file="src/main/java/com/automattic/android/tracks/MessageBuilder.java"
            line="116"
            column="81"/>
    </issue>

    <issue
        id="DefaultLocale"
        message="Implicitly using the default locale is a common source of bugs: Use `toLowerCase(Locale)` instead. For strings meant to be internal use `Locale.ROOT`, otherwise `Locale.getDefault()`."
        errorLine1="                eventJSON.remove(ALIAS_USER_ANONID_PROP_NAME.toLowerCase());"
        errorLine2="                                                             ~~~~~~~~~~~">
        <location
            file="src/main/java/com/automattic/android/tracks/MessageBuilder.java"
            line="118"
            column="62"/>
    </issue>

    <issue
        id="DefaultLocale"
        message="Implicitly using the default locale is a common source of bugs: Use `toLowerCase(Locale)` instead. For strings meant to be internal use `Locale.ROOT`, otherwise `Locale.getDefault()`."
        errorLine1="            String flattenKey = String.valueOf(flattenPrefix + key).toLowerCase();"
        errorLine2="                                                                    ~~~~~~~~~~~">
        <location
            file="src/main/java/com/automattic/android/tracks/MessageBuilder.java"
            line="144"
            column="69"/>
    </issue>

    <issue
        id="GradleDependency"
        message="A newer version of com.android.tools.build:gradle than 4.0.2 is available: 4.1.2"
        errorLine1="        classpath &apos;com.android.tools.build:gradle:4.0.2&apos;"
        errorLine2="        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~">
        <location
            file="build.gradle"
            line="7"
            column="9"/>
    </issue>

    <issue
        id="GradleDependency"
        message="A newer version of com.novoda:bintray-release than 0.9 is available: 0.9.2"
        errorLine1="        classpath &apos;com.novoda:bintray-release:0.9&apos;"
        errorLine2="        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~">
        <location
            file="build.gradle"
            line="8"
            column="9"/>
    </issue>

    <issue
        id="GradleDependency"
        message="A newer version of io.sentry:sentry-android than 1.7.16 is available: 4.1.0"
        errorLine1="    implementation &apos;io.sentry:sentry-android:1.7.16&apos;"
        errorLine2="    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~">
        <location
            file="build.gradle"
            line="22"
            column="5"/>
    </issue>

    <issue
        id="ExpiredTargetSdkVersion"
        message="Google Play requires that apps target API level 26 or higher.&#xA;"
        errorLine1="        targetSdkVersion 25"
        errorLine2="        ~~~~~~~~~~~~~~~~~~~">
        <location
            file="build.gradle"
            line="32"
            column="9"/>
    </issue>

    <issue
        id="Recycle"
        message="This `Cursor` should be freed up after use with `#close()`"
        errorLine1="        Cursor cursor = db.rawQuery(&quot;SELECT name FROM sqlite_master WHERE type=&apos;table&apos;&quot;, null);"
        errorLine2="                           ~~~~~~~~">
        <location
            file="src/main/java/com/automattic/android/tracks/datasets/SqlUtils.java"
            line="100"
            column="28"/>
    </issue>

    <issue
        id="ObsoleteSdkInt"
        message="Unnecessary; SDK_INT is always >= 14"
        errorLine1="        if (Build.VERSION.SDK_INT >= 8) {"
        errorLine2="            ~~~~~~~~~~~~~~~~~~~~~~~~~~">
        <location
            file="src/main/java/com/automattic/android/tracks/DeviceInformation.java"
            line="392"
            column="13"/>
    </issue>

    <issue
        id="StaticFieldLeak"
        message="Do not place Android context classes in static fields (static reference to `TracksDatabaseHelper` which has field `mContext` pointing to `Context`); this is a memory leak"
        errorLine1="    private static TracksDatabaseHelper mDatabaseHelper;"
        errorLine2="            ~~~~~~">
        <location
            file="src/main/java/com/automattic/android/tracks/datasets/TracksDatabaseHelper.java"
            line="25"
            column="13"/>
    </issue>

</issues>
